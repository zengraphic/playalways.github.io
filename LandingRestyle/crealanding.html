<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="cleartype" content="on">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0, minimal-ui">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no" />
    <!--- CSS -->
    <link rel="stylesheet" type="text/css" href="../scss/landing.css" />
    <!--- /CSS -->
    <!--- JS -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="../js/slick.min.js"></script>
    <script type="text/javascript" src="../js/landing.js"></script>
    <script type="text/javascript" src="../js/clipboard.min.js"></script>
    <!-- components script -->
</head>

<body>
    <div class="container">
        <input type="text" value="prima cartella" class="firstPath input_cms">
        <input type="text" value="seconda cartella" class="secondPath input_cms">
    </div>
    <div class="container">
        <h1 class="mainTitle" data-pagetarget="magnum">MAGNUM</h1>
        <div class="container_hidden">
            <button class="clip_btn" data-clipboard-target="#textareaHTML">copia</button>
        </div>
    </div>
    <div class="container">
        <h1 class="mainTitle" data-pagetarget="pita">PITA</h1>
        <div class="container_hidden">
            <button class="clip_btn" data-clipboard-target="#textareaHTML">copia</button>
        </div>
    </div>
    <pre id="textareaHTML"></pre>
</body>
<style>
.input_cms {
    margin-top: 30px;
    height: 50px;
    width: 300px;
    font-size: 20px;
}

button {
    height: 50px;
    width: 100px;
    font-size: 20px;
    text-transform: uppercase;
}

.container_hidden {
    display: none;
}

.container_cms {
    margin-bottom: 15px;
}

.mainTitle {
    margin-top: 15px;
    border: 1px solid orange;
    border-radius: 4px;
    width: 300px;
    text-align: center;
    font-family: 'Arial';
    color: orange;
}

pre {
    border: 1px solid black;
    width: 100%;
    max-width: 1024px;
    margin: 0 auto;
    height: 300px;
    overflow: scroll;
}
</style>
<script>
var magnum, headTag, header, path1, path2;


jQuery(document).ready(function($) {
    console.log(path1);
    new Clipboard('.clip_btn');
    var divContainer = '<div class="landing__subContainer"/>'
    var mainContainer = '.landing__mainContainer';
    // ============================== //
    // ============ HEADER ========== //
    // ============================== //

    $('.mainTitle').click(function() {
        $(this).parents('.container').find('.container_hidden').slideToggle();
    });

    function download_to_textbox(url, el) {
        $.get(url, null, function(data) {
            el.val(data);
        }, "text");
    }

    function loadFooter() {
        var pageToLoad = 'html/partials/footer.html';
        $.get(pageToLoad, function(my_var) {
            page = page + my_var;
        }, 'html').promise().done(function() {
            if ((path1 != "") && (path2 != "")) {
                var mergePath = 'fileadmin/Materiale/' + path1 + "/" + path2 + "/";
                mergePath = mergePath.replace(/ /g, "");
                page = page.replace(/([.][.][/])/g, mergePath);
            }
            $('#textareaHTML').text(page);
        });
    }

    function loadAccordion(currentPage) {
        var pageToLoad = 'html/partials/accordions/accordion_' + currentPage + '.html';
        $.get(pageToLoad, function(my_var) {
            page = page + my_var;
        }, 'html').promise().done(function() {
            loadFooter();
        });
    }

    function loadOfferDetail(currentPage) {
        var pageToLoad = 'html/partials/offer_details/offer_details_' + currentPage + '.html';
        $.get(pageToLoad, function(my_var) {
            page = page + my_var;
        }, 'html').promise().done(function() {
            loadAccordion(currentPage);
        });
    }

    function loadHero(currentPage) {
        var pageToLoad = 'html/partials/hero/hero_' + currentPage + '.html';
        $.get(pageToLoad, function(my_var) {
            page = page + my_var;
        }, 'html').promise().done(function() {
            loadOfferDetail(currentPage);
        });
    }

    function loadHeader(currentPage) {
        $.get("html/partials/header.html", function(my_var) {
            page = page + my_var;
        }, 'html').promise().done(function() {
            loadHero(currentPage);
        });
    }

    function loadHead(currentPage) {
        $.get("html/partials/headTag.html", function(my_var) {
            page = my_var;
        }, 'html').promise().done(function() {
            loadHeader(currentPage);
        });
    }

    $('.mainTitle').click(function() {
        var targetpage = $(this).data('pagetarget')
        path1 = $('.firstPath').val();
        path2 = $('.secondPath').val();
        console.log(path1 + " " + path2);
        loadHead(targetpage);
    });
});
</script>

</html>
